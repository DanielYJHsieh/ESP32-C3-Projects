# E-Paper 腳位測試程式

## 專案簡介
快速測試 ESP32-C3 與 E-Paper 的腳位連接是否正常，不使用 GxEPD2 庫，編譯速度快。

## 功能特性
- ✅ **GPIO 輸出測試** - 測試 CS, DC, RST 腳位
- ✅ **GPIO 輸入測試** - 測試 BUSY 腳位讀取
- ✅ **SPI 初始化測試** - 驗證 SPI 設定
- ✅ **SPI 傳輸測試** - 發送測試資料
- ✅ **E-Paper 復位序列** - 模擬標準復位流程
- ✅ **腳位電壓掃描** - 方便用萬用表測量
- ✅ **LED 狀態指示** - 測試結果視覺回饋

## 硬體連接

| E-Paper | ESP32-C3 GPIO | 說明 |
|---------|---------------|------|
| VCC | 3.3V | 電源 |
| GND | GND | 接地 |
| DIN | GPIO3 | MOSI |
| CLK | GPIO2 | SCLK |
| CS | GPIO10 | 片選 |
| DC | GPIO4 | 資料/命令 |
| RST | GPIO5 | 復位 |
| BUSY | GPIO6 | 忙碌檢測 |

## 編譯與上傳

### 編譯（快速）
```bash
arduino-cli compile --fqbn esp32:esp32:esp32c3 03_EPaper_Pin_Test
```
預計編譯時間：**30 秒 - 1 分鐘**（不需要 GxEPD2 庫）

### 上傳
```bash
arduino-cli upload -p COM4 --fqbn esp32:esp32:esp32c3 03_EPaper_Pin_Test
```

### 查看測試結果
```bash
arduino-cli monitor -p COM4 -c baudrate=115200
```

## 測試項目說明

### 1. GPIO 輸出測試
- 切換 CS, DC, RST 腳位的 HIGH/LOW
- 驗證輸出功能正常

### 2. GPIO 輸入測試
- 讀取 BUSY 腳位狀態
- 如未連接 E-Paper，可能顯示浮動狀態

### 3. SPI 初始化測試
- 初始化 SPI 介面
- 顯示使用的腳位

### 4. SPI 傳輸測試
- 發送測試資料: 0x00, 0x55, 0xAA, 0xFF
- 可用邏輯分析儀驗證

### 5. E-Paper 復位序列
- HIGH (20ms) → LOW (2ms) → HIGH (20ms)
- 標準的 E-Paper 復位時序

### 6. 腳位電壓掃描
- 設定所有腳位為 HIGH/LOW
- 方便用萬用表測量電壓
- 驗證硬體連接

## LED 狀態指示

- **快閃 2 次** - 測試通過 ✅
- **慢閃 3 次** - 測試失敗 ❌
- **慢速閃爍** - 程式運行中（閒置模式）

## 預期輸出範例

```
╔════════════════════════════════════════╗
║  E-Paper 腳位測試程式                 ║
║  ESP32-C3 Super Mini                   ║
╚════════════════════════════════════════╝

--- 系統資訊 ---
晶片型號: ESP32-C3
CPU 頻率: 160 MHz
Flash 大小: 4 MB

--- 記憶體資訊 ---
可用堆疊: 314768 bytes
最小可用: 314768 bytes

--- 初始化腳位 ---
腳位初始化完成
  CS, DC, RST: OUTPUT (初始化為 HIGH)
  BUSY: INPUT

==========================================
開始執行測試序列...
==========================================

========================================
測試: GPIO 輸出測試 (CS, DC, RST)
========================================
...
✅ 測試通過

[所有測試...]

==========================================
✅ 所有測試完成！

下一步：
1. 如果尚未連接 E-Paper，請按照 PIN_MAPPING.md 接線
2. 連接後可以編譯完整的 02_GDEQ0426T82_ESP32C3 程式
3. 使用邏輯分析儀可以驗證 SPI 波形
==========================================
```

## 故障排除

### 問題 1: 編譯錯誤
- 確認已安裝 ESP32 核心
- 只需要標準庫，不需要額外安裝

### 問題 2: SPI 測試失敗
- 檢查 GPIO 腳位是否正確
- 確認沒有短路

### 問題 3: BUSY 腳位讀取異常
- 未連接 E-Paper 時為浮動狀態（正常）
- 連接後應該有穩定的 HIGH/LOW

## 與完整版本的差異

| 項目 | 簡化版 (03) | 完整版 (02) |
|------|------------|------------|
| 編譯時間 | 30秒-1分鐘 | 3-8分鐘 |
| 庫依賴 | 無 | GxEPD2 + Adafruit GFX |
| 功能 | 腳位測試 | 完整顯示功能 |
| 適用場景 | 硬體驗證 | 實際使用 |

## 下一步

測試通過後，可以：
1. 編譯完整的 `02_GDEQ0426T82_ESP32C3`
2. 測試實際的 E-Paper 顯示功能
3. 開發 `esp32_wifi_display` 專案

---
**版本**: v1.0  
**日期**: 2025-10-22  
**專案**: ESP32-C3-Projects
